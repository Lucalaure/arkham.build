.layout {
  --sidebar-width: 22rem;

  display: grid;
  grid-template-areas:
    "header header"
    "sidebar content"
    "footer footer";
  grid-template-columns: var(--sidebar-width) 1fr;
  grid-template-rows: auto 1fr auto;
  min-height: 100dvh;
  row-gap: 0.5rem;
  column-gap: 1rem;
  margin-inline: auto;
  max-width: var(--layout-max-width);
  padding-inline: var(--layout-padding);
  padding-bottom: 0.5rem;
}

.layout-draft-picking {
  grid-template-columns: minmax(min-content, 20rem) 1fr;
}

.layout-draft-setup {
  --selections-width: 24rem;

  grid-template-columns: var(--sidebar-width) 1fr;
  grid-template-areas:
    "header header"
    "sidebar content"
    "sidebar selections"
    "footer footer";
  grid-template-rows: auto max-content max-content auto;
}

@media screen and (min-width: 75rem) {
  .layout-draft-setup {
    grid-template-areas:
      "header header header"
      "sidebar content selections"
      "footer footer footer";
    grid-template-columns: var(--sidebar-width) 1fr var(--selections-width);
    grid-template-rows: auto 1fr auto;
  }
}

.layout-header {
  grid-area: header;
}

.layout-sidebar {
  grid-area: sidebar;
  border: 1px solid var(--palette-1);
  border-radius: var(--rounded);
  overflow-y: auto;
  height: 100%;
}

.layout-content {
  grid-area: content;
  overflow-y: auto;
  min-height: 0;
}

.layout-draft-picking .layout-content {
  padding-inline: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  overflow-y: auto;
  min-height: 0;
  min-width: 0;
}

.layout-footer {
  grid-area: footer;
}

.layout-selections {
  grid-area: selections;
  overflow-y: auto;
  height: 100%;
}

.cards {
  container-type: inline-size;
  max-width: 54rem;
  margin-inline: auto;
}

.cards > * + * {
  margin-top: 1rem;
}

.card-selections > * + * {
  margin-top: 0.5rem;
}

/* Complete phase styles */
.complete-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  max-width: 40rem;
  padding-inline: 1rem;
}

.complete-actions {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  padding-top: 0.75rem;
  border-top: 1px solid var(--palette-2);
}

/* Card picker styles - based on suzi-standalone-setup */
.picker-container {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  overflow: visible;
  min-height: 0;
  width: 100%;
  min-width: 0;
  flex: 1;
}

.picker-header {
  display: flex;
  flex-flow: row nowrap;
  gap: 0.5rem;
  justify-content: space-between;
  align-items: center;
}

.picker-header h2 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.xp-counter {
  font-size: var(--text-sm);
  font-weight: 400;
  color: var(--palette-7);
  opacity: 0.8;
}

.picker-progress {
  font-size: var(--text-lg);
  font-weight: 600;
}

.picker-options {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(12rem, 1fr));
  list-style: none;
  padding: 0.25rem 0;
  margin: 0;
  overflow: visible;
  min-height: 0;
  width: 100%;
}

@media (min-width: 60rem) {
  .picker-options {
    grid-template-columns: repeat(auto-fit, minmax(13rem, 1fr));
  }
}

@media (min-width: 90rem) {
  .picker-options {
    grid-template-columns: repeat(auto-fit, minmax(14rem, 1fr));
  }
}

.picker-option {
  list-style: none;
}

.option-wrapper {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.myriad-buttons {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
}

.option-trigger {
  display: block;
  width: 100%;
  transition: transform 0.125s ease;
  will-change: transform;
  border-radius: var(--rounded-scan);
  background: none;
  border: none;
  padding: 0;
  user-select: none;
  cursor: pointer;

  &:hover {
    transform: translateY(-0.25rem);
    transition: transform 0.125s ease;
  }

  &:focus-visible {
    transform: translateY(-0.25rem);
    transition: transform 0.125s ease;
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }
}

.option-trigger img {
  position: relative;
  border-radius: var(--rounded-scan);
  background: var(--palette-0);
  transition:
    box-shadow 0.3s ease,
    transform 0.3s ease;
}

.option-trigger:focus-visible img,
.option-trigger:hover img {
  box-shadow: 0 0 calc(var(--level, 0) * 0.4rem) var(--accent-color);
  transform: scale(1.02);
  z-index: 3;
}

/* Progress sidebar styles */
.progress-container {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.progress-header {
  display: flex;
  flex-flow: row nowrap;
  gap: 0.5rem;
  justify-content: space-between;
  align-items: center;
}

.progress-stats {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  padding: 0.75rem;
  background: var(--palette-1);
  border-radius: var(--rounded);
}

.progress-cards {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  list-style: none;
  padding: 0;
  margin: 0;
}

.progress-card {
  display: flex;
  flex-flow: row nowrap;
  gap: 0.5rem;
  align-items: center;
  padding: 0.375rem 0.5rem;
  background: var(--palette-1);
  border-radius: var(--rounded);
  font-size: var(--text-sm);
}

.progress-card-quantity {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.5rem;
  padding: 0.125rem 0.375rem;
  background: var(--accent-color, var(--palette-3));
  border-radius: var(--rounded-sm);
  font-weight: 600;
  font-size: var(--text-xs);
}

.progress-card-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Complete phase styles */
.complete-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  max-width: 40rem;
}

.complete-actions {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  padding-top: 0.75rem;
  border-top: 1px solid var(--palette-2);
}

/* Investigator card display */
.investigator-card {
  display: flex;
  justify-content: center;
}

.customization-upgrade-wrapper {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.customization-upgrade-wrapper .customization {
  font-size: var(--text-2xs);
  padding: 0.5rem;
  border: 1px solid var(--palette-1);
  background: var(--palette-point-five);
  border-radius: var(--rounded);
  text-align: left;
}

.customization-upgrade-wrapper .checks {
  flex: 0 0 calc(var(--customization-xp, 0) * 1rem + 0.25rem);
  gap: 0.125rem;
  transform: translateY(0.125rem);
}

.customization-upgrade-wrapper .content {
  font-size: inherit;
  line-height: 1.3;
}

.customization-upgrade-wrapper .content p {
  margin: 0;
  max-width: none;
  font-size: inherit;
}

.customization-helper-text {
  color: var(--palette-6);
  line-height: 1.3;
}

.card-image-container {
  position: relative;
  width: 100%;
}

.card-image-container > * {
  width: 100%;
}

@media (max-width: 768px) {
  .layout {
    grid-template-areas:
      "header"
      "content"
      "sidebar"
      "footer";
    grid-template-columns: 1fr;
  }

  .picker-options {
    grid-template-columns: repeat(auto-fill, minmax(8rem, 1fr));
  }
}
